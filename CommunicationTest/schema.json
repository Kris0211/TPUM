{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/schemas/client-api.schema.json",
  "title": "Client API Schema",
  "type": "object",
  "definitions": {
    "ItemDTO": {
      "type": "object",
      "properties": {
        "Id": { "type": "string", "format": "uuid" },
        "Name": { "type": "string" },
        "Description": { "type": "string" },
        "Type": { "type": "string" },
        "Price": { "type": "number" },
        "IsSold": { "type": "boolean" }
      },
      "required": ["Id", "Name", "Description", "Type", "Price", "IsSold"]
    },
    "NewPriceDTO": {
      "type": "object",
      "properties": {
        "ItemId": { "type": "string", "format": "uuid" },
        "NewPrice": { "type": "number" }
      },
      "required": ["ItemId", "NewPrice"]
    },
    "ServerCommand": {
      "type": "object",
      "properties": {
        "Header": { "type": "string" }
      },
      "required": ["Header"]
    },
    "GetItemsCommand": {
      "allOf": [
        { "$ref": "#/definitions/ServerCommand" }
      ]
    },
    "SellItemCommand": {
      "allOf": [
        { "$ref": "#/definitions/ServerCommand" },
        {
          "type": "object",
          "properties": {
            "TransactionId": { "type": "string", "format": "uuid" },
            "ItemId": { "type": "string", "format": "uuid" }
          },
          "required": ["TransactionId", "ItemId"]
        }
      ]
    },
    "ServerResponse": {
      "type": "object",
      "properties": {
        "Header": { "type": "string" }
      },
      "required": ["Header"]
    },
    "UpdateAllResponse": {
      "allOf": [
        { "$ref": "#/definitions/ServerResponse" },
        {
          "type": "object",
          "properties": {
            "Items": {
              "type": "array",
              "items": { "$ref": "#/definitions/ItemDTO" }
            }
          }
        }
      ]
    },
    "ReputationChangedResponse": {
      "allOf": [
        { "$ref": "#/definitions/ServerResponse" },
        {
          "type": "object",
          "properties": {
            "NewReputation": { "type": "number" },
            "NewPrices": {
              "type": "array",
              "items": { "$ref": "#/definitions/NewPriceDTO" }
            }
          },
          "required": ["NewReputation"]
        }
      ]
    },
    "TransactionResponse": {
      "allOf": [
        { "$ref": "#/definitions/ServerResponse" },
        {
          "type": "object",
          "properties": {
            "TransactionId": { "type": "string", "format": "uuid" },
            "Succeeded": { "type": "boolean" }
          },
          "required": ["TransactionId", "Succeeded"]
        }
      ]
    }
  }
}